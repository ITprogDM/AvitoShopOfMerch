# Avito Shop

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –ø–æ–∫—É–ø–æ–∫, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ –ø–µ—Ä–µ–≤–æ–¥–∞ –º–æ–Ω–µ—Ç –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

PostgreSQL (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö)

Docker (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞)

Gin (–≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫)

golang-migrate/migrate (–¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –ë–î)

pgx (–¥—Ä–∞–π–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL)

golang/mock, testify (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö subs)

–°–µ—Ä–≤–∏—Å –±—ã–ª –Ω–∞–ø–∏—Å–∞–Ω —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Clean Architecture, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å. –¢–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω Graceful Shutdown –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã.

Getting Started

## üîß –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:

–ó–∞–ø–æ–ª–Ω–∏—Ç—å .env —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ .env.example.

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å:
```
make start
```
–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î:
```
make migrate
```
–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞, —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã!


## üìÑ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üü¢ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

POST /api/auth ‚Äî –ª–æ–≥–∏–Ω –∏–ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (JWT-—Ç–æ–∫–µ–Ω)

### üîµ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

GET /api/info ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–±–∞–ª–∞–Ω—Å, –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏)

### üü° –ü–æ–∫—É–ø–∫–∏

GET /api/buy/:item ‚Äî –ø–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞

### üî¥ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

POST /api/sendCoin ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –º–æ–Ω–µ—Ç –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### üê≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ª–∏–Ω—Ç–∏–Ω–≥
–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞, —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –∫–æ–º–∞–Ω–¥–æ–π:
```
make start
```

–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤: 
```
make test
```

–ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞: 
```
make lint
```

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

```sh
(curl --location --request POST 'http://localhost:8080/api/auth' \
--header 'Content-Type: application/json' \
--data-raw '{ "username": "user", "password": "password" }')
```
#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```
{ "token": "your_jwt_token" }
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

```
curl --location --request GET 'http://localhost:8080/api/info' \
--header 'Authorization: Bearer your_jwt_token'
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```
{
"coins": 1000,
"inventory": [
{ "type": "t-shirt", "quantity": 2 },
{ "type": "book", "quantity": 1 }
],
"coinHistory": {
"received": [{ "fromUser": "friend", "amount": 200 }],
"sent": [{ "toUser": "shop", "amount": 50 }]
}
}
```

### –ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–∞

```
curl --location --request GET 'http://localhost:8080/api/buy/t-shirt' \
--header 'Authorization: Bearer your_jwt_token'
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:

```
{ "message": "Purchase successful" }

```
### –ü–µ—Ä–µ–≤–æ–¥ –º–æ–Ω–µ—Ç

```
curl --location --request POST 'http://localhost:8080/api/sendCoin' \
--header 'Authorization: Bearer your_jwt_token' \
--header 'Content-Type: application/json' \
--data-raw '{ "toUser": "receiver", "amount": 100 }'
```

#### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```
{ "message": "Transaction successful" }
```

